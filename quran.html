<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0c1a12">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Amiri:ital,wght@0,400;0,700&family=Noto+Naskh+Arabic:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:     #080f0a;
  --bg2:    #0c1710;
  --surf:   #111d14;
  --surf2:  #172218;
  --surf3:  #1e2e20;
  --bdr:    rgba(196,160,60,.18);
  --bdr-h:  rgba(196,160,60,.45);
  --gold:   #c4a03c;
  --gold-l: #e0bc5a;
  --gold-d: #8a6e26;
  --glow:   rgba(196,160,60,.2);
  --grn:    #2a5c38;
  --grn-l:  #3d7a50;
  --tx:     #f0e8d8;
  --tx2:    #b8a890;
  --tx3:    #7a6e5e;
  --ease:   cubic-bezier(.4,0,.2,1);
  --sidebar-w: 300px;
}

body.light {
  --bg:#f0e8d5; --bg2:#e8dfc8; --surf:#fdf6e3; --surf2:#f5ecd5; --surf3:#ede3cc;
  --bdr:rgba(120,90,20,.15); --bdr-h:rgba(120,90,20,.4);
  --gold:#7a5a10; --gold-l:#9a7218; --gold-d:#c8a84a; --glow:rgba(122,90,16,.15);
  --grn:#2a5c38; --grn-l:#3d7a50;
  --tx:#1a1005; --tx2:#5a4820; --tx3:#8a7a5a;
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}

body{
  font-family:'Noto Naskh Arabic',serif;
  background:var(--bg);color:var(--tx);
  min-height:100vh;overflow-x:hidden;
  transition:background .4s var(--ease),color .4s var(--ease);
}

/* Pattern bg */
body::before{
  content:'';position:fixed;inset:0;
  background-image:
    repeating-linear-gradient(60deg,transparent,transparent 38px,rgba(196,160,60,.018) 38px,rgba(196,160,60,.018) 39px),
    repeating-linear-gradient(-60deg,transparent,transparent 38px,rgba(196,160,60,.018) 38px,rgba(196,160,60,.018) 39px);
  pointer-events:none;z-index:0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.app{display:flex;min-height:100vh;position:relative;z-index:1;}

/* â”€â”€ SIDEBAR â”€â”€ */
.sidebar{
  width:var(--sidebar-w);flex-shrink:0;
  background:var(--surf);
  border-left:1px solid var(--bdr);
  display:flex;flex-direction:column;
  height:100vh;position:sticky;top:0;
  transition:transform .35s var(--ease),background .4s;
  z-index:200;overflow:hidden;
}

.sidebar-head{
  padding:20px 18px 16px;
  border-bottom:1px solid var(--bdr);
  flex-shrink:0;
}

.sidebar-logo{
  display:flex;align-items:center;gap:10px;
  text-decoration:none;margin-bottom:14px;
}
.s-logo-mark{
  width:36px;height:36px;border-radius:10px;
  background:linear-gradient(135deg,var(--gold),var(--gold-l));
  display:flex;align-items:center;justify-content:center;font-size:1.1rem;
  box-shadow:0 3px 12px var(--glow);flex-shrink:0;
}
.s-logo-txt{font-family:'Amiri',serif;font-size:1rem;color:var(--gold-l);font-weight:700;}

.search-box{
  position:relative;
}
.search-box input{
  width:100%;background:var(--surf2);
  border:1px solid var(--bdr);border-radius:10px;
  padding:9px 38px 9px 14px;
  color:var(--tx);font-family:'Noto Naskh Arabic',serif;font-size:.88rem;
  transition:all .2s;
}
.search-box input:focus{outline:none;border-color:var(--bdr-h);background:var(--surf3);}
.search-box input::placeholder{color:var(--tx3);}
.search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--tx3);font-size:.85rem;}

.surah-list{flex:1;overflow-y:auto;padding:8px;}
.surah-list::-webkit-scrollbar{width:4px;}
.surah-list::-webkit-scrollbar-track{background:transparent;}
.surah-list::-webkit-scrollbar-thumb{background:var(--gold-d);border-radius:2px;}

.surah-item{
  display:flex;align-items:center;gap:10px;
  padding:10px 12px;border-radius:10px;
  cursor:pointer;transition:all .2s;
  border:1px solid transparent;
}
.surah-item:hover{background:var(--surf2);border-color:var(--bdr);}
.surah-item.active{background:rgba(196,160,60,.1);border-color:var(--bdr-h);}
.surah-item.active .si-name{color:var(--gold-l);}

.si-num{
  width:30px;height:30px;border-radius:8px;
  background:var(--surf2);
  display:flex;align-items:center;justify-content:center;
  font-size:.75rem;color:var(--tx3);flex-shrink:0;
  font-family:'Amiri',serif;
}
.surah-item.active .si-num{background:rgba(196,160,60,.15);color:var(--gold);}

.si-info{flex:1;min-width:0;}
.si-name{font-family:'Amiri',serif;font-size:1rem;color:var(--tx);display:block;line-height:1.2;}
.si-meta{font-size:.72rem;color:var(--tx3);}

.si-revelation{
  font-size:.65rem;padding:2px 7px;border-radius:6px;
  background:var(--surf3);color:var(--tx3);flex-shrink:0;
}

/* â”€â”€ MAIN â”€â”€ */
.main{flex:1;display:flex;flex-direction:column;min-width:0;}

/* TOP BAR */
.topbar{
  position:sticky;top:0;z-index:100;
  padding:0 24px;
  background:rgba(8,15,10,.0);
  transition:all .3s var(--ease);
  border-bottom:1px solid transparent;
}
body.light .topbar{background:rgba(240,232,213,.0);}
.topbar.scrolled{
  background:rgba(8,15,10,.92);
  border-bottom-color:var(--bdr);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
}
body.light .topbar.scrolled{background:rgba(240,232,213,.92);}

.topbar-inner{
  max-width:820px;margin:0 auto;
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 0;gap:16px;
}

.back-btn{
  display:inline-flex;align-items:center;gap:7px;
  color:var(--tx2);font-size:.88rem;
  text-decoration:none;padding:8px 16px;
  border:1px solid var(--bdr);border-radius:30px;
  transition:all .2s;flex-shrink:0;
}
.back-btn:hover{border-color:var(--bdr-h);color:var(--gold-l);}

.topbar-title{
  font-family:'Amiri',serif;font-size:1.1rem;
  color:var(--gold-l);text-align:center;flex:1;
}

.topbar-acts{display:flex;gap:8px;align-items:center;}
.tbtn{
  width:36px;height:36px;border-radius:50%;
  border:1px solid var(--bdr);background:var(--surf);
  color:var(--tx2);font-size:.9rem;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  transition:all .2s;
}
.tbtn:hover{border-color:var(--bdr-h);color:var(--gold);}

.burger-btn{display:none;}

/* â”€â”€ READER AREA â”€â”€ */
.reader{
  flex:1;padding:40px 24px 80px;
  max-width:820px;width:100%;margin:0 auto;
}

/* Surah selector for mobile top */
.mobile-surah-bar{
  display:none;
  margin-bottom:24px;
}
.mobile-surah-bar select{
  width:100%;background:var(--surf);
  border:1px solid var(--bdr);border-radius:12px;
  padding:12px 16px;color:var(--tx);
  font-family:'Noto Naskh Arabic',serif;font-size:.95rem;
  cursor:pointer;
}
.mobile-surah-bar select:focus{outline:none;border-color:var(--bdr-h);}

/* Empty state */
.empty-state{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  min-height:60vh;text-align:center;gap:16px;
}
.empty-icon{
  width:100px;height:100px;border-radius:50%;
  background:var(--surf);border:1px solid var(--bdr);
  display:flex;align-items:center;justify-content:center;
  font-size:2.8rem;
  box-shadow:0 8px 30px rgba(0,0,0,.3);
}
.empty-title{font-family:'Amiri',serif;font-size:1.8rem;color:var(--tx2);}
.empty-sub{font-size:.9rem;color:var(--tx3);}

/* Loader */
.loader{
  display:none;flex-direction:column;
  align-items:center;justify-content:center;
  min-height:50vh;gap:18px;
}
.loader.show{display:flex;}
.spinner{
  width:50px;height:50px;
  border:3px solid var(--bdr);
  border-top-color:var(--gold);
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg);}}
.loader-txt{color:var(--tx3);font-size:.9rem;}

/* Offline */
.offline-bar{
  display:none;align-items:center;gap:10px;
  background:rgba(220,80,60,.15);border:1px solid rgba(220,80,60,.3);
  border-radius:12px;padding:12px 18px;
  margin-bottom:20px;font-size:.88rem;color:#ff9a8a;
}
.offline-bar.show{display:flex;}

/* â”€â”€ SURAH CARD â”€â”€ */
.surah-card{display:none;animation:fdIn .5s var(--ease);}
.surah-card.show{display:block;}
@keyframes fdIn{from{opacity:0;transform:translateY(16px);}to{opacity:1;transform:none;}}

/* Decorative header */
.surah-header{
  text-align:center;
  padding:40px 30px 36px;
  margin-bottom:30px;
  background:var(--surf);
  border:1px solid var(--bdr);
  border-radius:24px;
  position:relative;overflow:hidden;
}
.surah-header::before{
  content:'';position:absolute;top:0;left:0;right:0;height:3px;
  background:linear-gradient(90deg,transparent,var(--gold),var(--gold-l),var(--gold),transparent);
}
.surah-header::after{
  content:'';position:absolute;bottom:0;left:0;right:0;height:3px;
  background:linear-gradient(90deg,transparent,var(--gold),var(--gold-l),var(--gold),transparent);
}

/* Corner ornaments */
.surah-header .corner{
  position:absolute;font-size:1.4rem;opacity:.25;color:var(--gold);
  line-height:1;
}
.surah-header .corner.tl{top:10px;right:14px;}
.surah-header .corner.tr{top:10px;left:14px;}
.surah-header .corner.bl{bottom:10px;right:14px;}
.surah-header .corner.br{bottom:10px;left:14px;}

.sh-number{
  display:inline-flex;align-items:center;justify-content:center;
  width:42px;height:42px;
  background:rgba(196,160,60,.12);border:1px solid var(--bdr-h);
  border-radius:50%;font-family:'Amiri',serif;font-size:1.1rem;
  color:var(--gold);margin-bottom:14px;
}
.sh-name{
  font-family:'Amiri',serif;
  font-size:clamp(2.2rem,6vw,3.4rem);
  color:var(--tx);line-height:1.1;
  margin-bottom:6px;
}
.sh-name-en{font-size:.85rem;color:var(--tx3);margin-bottom:18px;letter-spacing:.5px;}
.sh-meta{
  display:inline-flex;align-items:center;gap:16px;
  background:var(--surf2);border:1px solid var(--bdr);
  border-radius:30px;padding:7px 20px;
  font-size:.8rem;color:var(--tx2);margin-bottom:22px;
}
.sh-meta span{display:flex;align-items:center;gap:5px;}
.sh-sep{width:1px;height:14px;background:var(--bdr);}

.bismillah{
  font-family:'Amiri Quran',serif;
  font-size:clamp(1.6rem,4vw,2.2rem);
  color:var(--gold-l);
  line-height:1.8;
  text-shadow:0 0 30px var(--glow);
}

/* CONTROLS BAR */
.controls{
  background:var(--surf);border:1px solid var(--bdr);
  border-radius:16px;padding:16px 20px;
  margin-bottom:24px;
  display:flex;flex-wrap:wrap;gap:12px;align-items:center;
  justify-content:space-between;
}

.ctrl-group{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}

.ctrl-label{font-size:.78rem;color:var(--tx3);flex-shrink:0;}

.ctrl-select{
  background:var(--surf2);border:1px solid var(--bdr);
  border-radius:9px;padding:8px 12px;
  color:var(--tx);font-family:'Noto Naskh Arabic',serif;font-size:.85rem;
  cursor:pointer;transition:all .2s;min-width:140px;
}
.ctrl-select:focus{outline:none;border-color:var(--bdr-h);}
.ctrl-select:hover{border-color:var(--bdr-h);}

.font-btns{display:flex;gap:4px;}
.font-btn{
  width:34px;height:34px;border-radius:8px;
  border:1px solid var(--bdr);background:var(--surf2);
  color:var(--tx2);cursor:pointer;font-weight:700;
  display:flex;align-items:center;justify-content:center;font-size:.9rem;
  transition:all .2s;
}
.font-btn:hover{border-color:var(--bdr-h);color:var(--gold);}

.save-btn{
  display:inline-flex;align-items:center;gap:7px;
  padding:9px 18px;border-radius:10px;
  border:1px solid var(--bdr);background:var(--surf2);
  color:var(--tx2);font-family:'Noto Naskh Arabic',serif;font-size:.85rem;
  cursor:pointer;transition:all .2s;
}
.save-btn:hover{border-color:var(--bdr-h);color:var(--gold);}
.save-btn.saved{background:rgba(196,160,60,.12);border-color:var(--bdr-h);color:var(--gold-l);}

/* AUDIO PLAYER */
.audio-wrap{
  background:var(--surf);border:1px solid var(--bdr);
  border-radius:16px;padding:18px 22px;
  margin-bottom:24px;
  display:flex;flex-wrap:wrap;align-items:center;gap:14px;
}
.audio-label{font-size:.8rem;color:var(--tx3);flex-shrink:0;}

audio{
  flex:1;min-width:200px;height:40px;
  border-radius:20px;
  filter:sepia(20%) hue-rotate(100deg);
}
body.light audio{filter:sepia(10%) hue-rotate(80deg);}

.dl-btn{
  display:inline-flex;align-items:center;gap:7px;
  padding:9px 18px;
  background:linear-gradient(135deg,var(--gold-d),var(--gold));
  color:#0c1008;font-family:'Noto Naskh Arabic',serif;
  font-weight:700;font-size:.82rem;
  border-radius:10px;text-decoration:none;
  transition:all .2s;white-space:nowrap;border:none;cursor:pointer;
}
.dl-btn:hover{transform:translateY(-2px);box-shadow:0 6px 18px var(--glow);}

/* TABS (Quran / Tafseer) */
.tabs{
  display:flex;gap:0;
  background:var(--surf);border:1px solid var(--bdr);
  border-radius:12px;overflow:hidden;
  margin-bottom:20px;
}
.tab-btn{
  flex:1;padding:11px;text-align:center;
  font-family:'Noto Naskh Arabic',serif;font-size:.88rem;
  color:var(--tx2);cursor:pointer;border:none;background:transparent;
  transition:all .2s;border-bottom:2px solid transparent;
}
.tab-btn.active{color:var(--gold-l);border-bottom-color:var(--gold);background:rgba(196,160,60,.06);}
.tab-btn:hover:not(.active){color:var(--tx);background:var(--surf2);}

/* QURAN TEXT */
.quran-text{
  font-family:'Amiri Quran',serif;
  font-size:2rem;line-height:2.8;
  text-align:justify;
  color:var(--tx);
  word-spacing:3px;
  padding:32px 28px;
  background:var(--surf);
  border:1px solid var(--bdr);
  border-radius:20px;
  transition:font-size .2s;
}

/* parchment texture in light mode */
body.light .quran-text{
  background:linear-gradient(135deg,#fdf6e3 0%,#f9f0d3 100%);
  box-shadow:0 4px 30px rgba(120,80,10,.08);
}

.ayah-span{
  display:inline;cursor:pointer;
  border-radius:4px;
  transition:background .15s;
  padding:1px 2px;
}
.ayah-span:hover{background:rgba(196,160,60,.12);}
.ayah-span.playing{background:rgba(196,160,60,.2);}

.ayah-num{
  display:inline-flex;align-items:center;justify-content:center;
  width:28px;height:28px;
  background:linear-gradient(135deg,var(--gold-d),var(--gold));
  color:#0c1008;border-radius:50%;
  font-size:.55em;font-weight:700;
  margin:0 6px;vertical-align:middle;
  font-family:'Noto Naskh Arabic',serif;
  flex-shrink:0;
}

/* TAFSEER TEXT */
.tafseer-text{
  display:none;
  background:var(--surf);border:1px solid var(--bdr);border-radius:20px;
  padding:28px;
}
.tafseer-text.show{display:block;animation:fdIn .4s var(--ease);}

.tafseer-ayah{
  padding:18px 0;border-bottom:1px solid var(--bdr);
}
.tafseer-ayah:last-child{border-bottom:none;}

.ta-arabic{
  font-family:'Amiri Quran',serif;font-size:1.5rem;
  line-height:2.2;color:var(--tx);margin-bottom:12px;
  padding:16px;background:var(--surf2);border-radius:12px;
  border-right:3px solid var(--gold);
}
.ta-tafseer{
  font-size:.92rem;color:var(--tx2);line-height:1.9;
}
.ta-num{
  display:inline-flex;align-items:center;justify-content:center;
  width:24px;height:24px;
  background:rgba(196,160,60,.15);border:1px solid var(--bdr-h);
  border-radius:50%;font-size:.7rem;color:var(--gold);
  font-family:'Noto Naskh Arabic',serif;margin-left:8px;flex-shrink:0;
  float:right;margin-top:2px;margin-right:0;
}

/* SAVED SECTION */
.saved-wrap{
  margin-top:32px;
  background:var(--surf);border:1px solid var(--bdr);border-radius:16px;
  padding:20px;display:none;
}
.saved-wrap.show{display:block;animation:fdIn .4s;}
.saved-head{font-family:'Amiri',serif;font-size:1.1rem;color:var(--gold-l);margin-bottom:14px;display:flex;align-items:center;gap:8px;}
.saved-pills{display:flex;flex-wrap:wrap;gap:8px;}
.saved-pill{
  padding:7px 16px;border-radius:20px;
  border:1px solid var(--bdr);background:var(--surf2);
  color:var(--tx2);font-size:.85rem;cursor:pointer;transition:all .2s;
}
.saved-pill:hover{border-color:var(--gold);color:var(--gold-l);}

/* TOAST */
.toast{
  position:fixed;bottom:30px;left:50%;transform:translateX(-50%) translateY(80px);
  background:var(--surf3);border:1px solid var(--bdr-h);
  color:var(--gold-l);padding:12px 24px;border-radius:30px;
  font-size:.9rem;font-weight:600;z-index:9999;
  transition:transform .3s var(--ease);
  box-shadow:0 8px 24px rgba(0,0,0,.4);
  white-space:nowrap;
}
.toast.show{transform:translateX(-50%) translateY(0);}

/* MOBILE OVERLAY */
.overlay{
  display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:150;
  backdrop-filter:blur(4px);
}
.overlay.show{display:block;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media(max-width:860px){
  .sidebar{
    position:fixed;top:0;right:0;bottom:0;
    transform:translateX(100%);
    z-index:200;
  }
  .sidebar.open{transform:translateX(0);}
  .burger-btn{display:flex;}
  .mobile-surah-bar{display:block;}
  .reader{padding:24px 16px 70px;}
}

@media(max-width:500px){
  .quran-text{font-size:1.6rem;line-height:2.6;padding:20px 16px;}
  .controls{padding:12px 14px;}
  .surah-header{padding:28px 18px 26px;}
  .sh-name{font-size:2rem;}
}

::-webkit-scrollbar{width:5px;}
::-webkit-scrollbar-track{background:var(--bg);}
::-webkit-scrollbar-thumb{background:var(--gold-d);border-radius:3px;}
::selection{background:rgba(196,160,60,.25);color:var(--gold-l);}
</style>
</head>
<body>

<div class="toast" id="toast"></div>
<div class="overlay" id="overlay" onclick="closeSidebar()"></div>

<div class="app">

  <!-- â•â•â• SIDEBAR â•â•â• -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-head">
      <a href="index.html" class="sidebar-logo">
        <div class="s-logo-mark">ğŸŒ™</div>
        <span class="s-logo-txt">Ø§Ù„Ù…ÙˆØ³ÙˆØ¹Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©</span>
      </a>
      <div class="search-box">
        <input type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙˆØ±Ø©..." id="searchInput" oninput="filterSurahs()">
        <span class="search-icon">ğŸ”</span>
      </div>
    </div>
    <div class="surah-list" id="surahList">
      <!-- populated by JS -->
    </div>
  </aside>

  <!-- â•â•â• MAIN â•â•â• -->
  <div class="main">

    <!-- TOPBAR -->
    <div class="topbar" id="topbar">
      <div class="topbar-inner">
        <a href="index.html" class="back-btn">â¬… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <span class="topbar-title" id="topbarTitle">Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</span>
        <div class="topbar-acts">
          <button class="tbtn" onclick="toggleTheme()" title="Ø§Ù„Ù…Ø¸Ù‡Ø±">ğŸŒ“</button>
          <button class="tbtn burger-btn" id="burgerBtn" onclick="toggleSidebar()">â˜°</button>
        </div>
      </div>
    </div>

    <!-- READER -->
    <div class="reader">

      <!-- Mobile surah selector -->
      <div class="mobile-surah-bar">
        <select id="mobileSurahSel" onchange="selectSurahByNum(this.value)">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©...</option>
        </select>
      </div>

      <!-- Offline -->
      <div class="offline-bar" id="offlineBar">
        ğŸ“´ Ø£Ù†Øª ÙÙŠ ÙˆØ¶Ø¹ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„ â€” ÙŠÙ…ÙƒÙ†Ùƒ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³ÙˆØ± Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙÙ‚Ø·
      </div>

      <!-- Empty state -->
      <div class="empty-state" id="emptyState">
        <div class="empty-icon">ğŸ“–</div>
        <div class="empty-title">Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</div>
        <div class="empty-sub">Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø£Ùˆ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£Ø¹Ù„Ø§Ù‡</div>
      </div>

      <!-- Loader -->
      <div class="loader" id="loader">
        <div class="spinner"></div>
        <span class="loader-txt">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©...</span>
      </div>

      <!-- Surah card -->
      <div class="surah-card" id="surahCard">

        <!-- Surah header -->
        <div class="surah-header">
          <span class="corner tl">â§</span><span class="corner tr">â§</span>
          <span class="corner bl">â§</span><span class="corner br">â§</span>
          <div class="sh-number" id="shNum">Ù¡</div>
          <h1 class="sh-name" id="shName">Ø§Ù„ÙØ§ØªØ­Ø©</h1>
          <div class="sh-name-en" id="shNameEn">Al-Fatihah</div>
          <div class="sh-meta">
            <span>ğŸ•Œ <span id="shRevelation"></span></span>
            <div class="sh-sep"></div>
            <span>ğŸ“¿ <span id="shAyahs"></span> Ø¢ÙŠØ©</span>
          </div>
          <div class="bismillah" id="bismillah">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ€Ù°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
        </div>

        <!-- Controls -->
        <div class="controls">
          <div class="ctrl-group">
            <span class="ctrl-label">Ø§Ù„Ù‚Ø§Ø±Ø¦:</span>
            <select class="ctrl-select" id="reciterSel" onchange="updateAudio()">
              <option value="ar.alafasy">Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ</option>
              <option value="ar.abdulbasitmurattal">Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· (Ù…Ø±ØªÙ„)</option>
              <option value="ar.husary">Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ</option>
              <option value="ar.minshawi">Ù…Ø­Ù…Ø¯ ØµØ¯ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ</option>
              <option value="ar.abdullahbasfar">Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨ØµÙØ±</option>
              <option value="ar.saoodshuraym">Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø´Ø±ÙŠÙ…</option>
            </select>
          </div>
          <div class="ctrl-group">
            <span class="ctrl-label">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·:</span>
            <div class="font-btns">
              <button class="font-btn" onclick="changeFont(-1)">âˆ’</button>
              <button class="font-btn" onclick="changeFont(1)">+</button>
            </div>
          </div>
          <button class="save-btn" id="saveBtn" onclick="toggleSave()">ğŸ’¾ Ø­ÙØ¸ Ø¨Ø¯ÙˆÙ† Ù†Øª</button>
        </div>

        <!-- Audio -->
        <div class="audio-wrap">
          <span class="audio-label">ğŸ™ï¸ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹:</span>
          <audio id="player" controls></audio>
          <a class="dl-btn" id="dlBtn" href="#" download>ğŸ“¥ ØªØ­Ù…ÙŠÙ„ MP3</a>
        </div>

        <!-- Tabs -->
        <div class="tabs">
          <button class="tab-btn active" onclick="switchTab('quran',this)">ğŸ“– Ø§Ù„Ù†Øµ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</button>
          <button class="tab-btn" onclick="switchTab('tafseer',this)">ğŸ’¡ Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„Ù…ÙŠØ³Ø±</button>
        </div>

        <!-- Quran text -->
        <div class="quran-text" id="quranText"></div>

        <!-- Tafseer text -->
        <div class="tafseer-text" id="tafseerText"></div>

      </div>

      <!-- Saved surahs -->
      <div class="saved-wrap" id="savedWrap">
        <div class="saved-head">ğŸ“š Ø§Ù„Ø³ÙˆØ± Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</div>
        <div class="saved-pills" id="savedPills"></div>
      </div>

    </div><!-- /reader -->
  </div><!-- /main -->
</div><!-- /app -->

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA & STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const surahMeta=[
  {n:1,name:'Ø§Ù„ÙØ§ØªØ­Ø©',nameEn:'Al-Fatihah',rev:'Ù…ÙƒÙŠØ©',ayahs:7},
  {n:2,name:'Ø§Ù„Ø¨Ù‚Ø±Ø©',nameEn:'Al-Baqarah',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:286},
  {n:3,name:'Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†',nameEn:"Ali 'Imran",rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:200},
  {n:4,name:'Ø§Ù„Ù†Ø³Ø§Ø¡',nameEn:"An-Nisa",rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:176},
  {n:5,name:'Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©',nameEn:'Al-Ma\'idah',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:120},
  {n:6,name:'Ø§Ù„Ø£Ù†Ø¹Ø§Ù…',nameEn:"Al-An'am",rev:'Ù…ÙƒÙŠØ©',ayahs:165},
  {n:7,name:'Ø§Ù„Ø£Ø¹Ø±Ø§Ù',nameEn:"Al-A'raf",rev:'Ù…ÙƒÙŠØ©',ayahs:206},
  {n:8,name:'Ø§Ù„Ø£Ù†ÙØ§Ù„',nameEn:'Al-Anfal',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:75},
  {n:9,name:'Ø§Ù„ØªÙˆØ¨Ø©',nameEn:'At-Tawbah',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:129},
  {n:10,name:'ÙŠÙˆÙ†Ø³',nameEn:'Yunus',rev:'Ù…ÙƒÙŠØ©',ayahs:109},
  {n:11,name:'Ù‡ÙˆØ¯',nameEn:'Hud',rev:'Ù…ÙƒÙŠØ©',ayahs:123},
  {n:12,name:'ÙŠÙˆØ³Ù',nameEn:'Yusuf',rev:'Ù…ÙƒÙŠØ©',ayahs:111},
  {n:13,name:'Ø§Ù„Ø±Ø¹Ø¯',nameEn:"Ar-Ra'd",rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:43},
  {n:14,name:'Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…',nameEn:'Ibrahim',rev:'Ù…ÙƒÙŠØ©',ayahs:52},
  {n:15,name:'Ø§Ù„Ø­Ø¬Ø±',nameEn:'Al-Hijr',rev:'Ù…ÙƒÙŠØ©',ayahs:99},
  {n:16,name:'Ø§Ù„Ù†Ø­Ù„',nameEn:'An-Nahl',rev:'Ù…ÙƒÙŠØ©',ayahs:128},
  {n:17,name:'Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡',nameEn:"Al-Isra",rev:'Ù…ÙƒÙŠØ©',ayahs:111},
  {n:18,name:'Ø§Ù„ÙƒÙ‡Ù',nameEn:'Al-Kahf',rev:'Ù…ÙƒÙŠØ©',ayahs:110},
  {n:19,name:'Ù…Ø±ÙŠÙ…',nameEn:'Maryam',rev:'Ù…ÙƒÙŠØ©',ayahs:98},
  {n:20,name:'Ø·Ù‡',nameEn:'Ta-Ha',rev:'Ù…ÙƒÙŠØ©',ayahs:135},
  {n:21,name:'Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡',nameEn:"Al-Anbiya",rev:'Ù…ÙƒÙŠØ©',ayahs:112},
  {n:22,name:'Ø§Ù„Ø­Ø¬',nameEn:'Al-Hajj',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:78},
  {n:23,name:'Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†',nameEn:"Al-Mu'minun",rev:'Ù…ÙƒÙŠØ©',ayahs:118},
  {n:24,name:'Ø§Ù„Ù†ÙˆØ±',nameEn:'An-Nur',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:64},
  {n:25,name:'Ø§Ù„ÙØ±Ù‚Ø§Ù†',nameEn:'Al-Furqan',rev:'Ù…ÙƒÙŠØ©',ayahs:77},
  {n:26,name:'Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡',nameEn:"Ash-Shu'ara",rev:'Ù…ÙƒÙŠØ©',ayahs:227},
  {n:27,name:'Ø§Ù„Ù†Ù…Ù„',nameEn:'An-Naml',rev:'Ù…ÙƒÙŠØ©',ayahs:93},
  {n:28,name:'Ø§Ù„Ù‚ØµØµ',nameEn:'Al-Qasas',rev:'Ù…ÙƒÙŠØ©',ayahs:88},
  {n:29,name:'Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª',nameEn:"Al-'Ankabut",rev:'Ù…ÙƒÙŠØ©',ayahs:69},
  {n:30,name:'Ø§Ù„Ø±ÙˆÙ…',nameEn:'Ar-Rum',rev:'Ù…ÙƒÙŠØ©',ayahs:60},
  {n:31,name:'Ù„Ù‚Ù…Ø§Ù†',nameEn:'Luqman',rev:'Ù…ÙƒÙŠØ©',ayahs:34},
  {n:32,name:'Ø§Ù„Ø³Ø¬Ø¯Ø©',nameEn:'As-Sajdah',rev:'Ù…ÙƒÙŠØ©',ayahs:30},
  {n:33,name:'Ø§Ù„Ø£Ø­Ø²Ø§Ø¨',nameEn:'Al-Ahzab',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:73},
  {n:34,name:'Ø³Ø¨Ø£',nameEn:'Saba',rev:'Ù…ÙƒÙŠØ©',ayahs:54},
  {n:35,name:'ÙØ§Ø·Ø±',nameEn:'Fatir',rev:'Ù…ÙƒÙŠØ©',ayahs:45},
  {n:36,name:'ÙŠØ³',nameEn:'Ya-Sin',rev:'Ù…ÙƒÙŠØ©',ayahs:83},
  {n:37,name:'Ø§Ù„ØµØ§ÙØ§Øª',nameEn:'As-Saffat',rev:'Ù…ÙƒÙŠØ©',ayahs:182},
  {n:38,name:'Øµ',nameEn:'Sad',rev:'Ù…ÙƒÙŠØ©',ayahs:88},
  {n:39,name:'Ø§Ù„Ø²Ù…Ø±',nameEn:'Az-Zumar',rev:'Ù…ÙƒÙŠØ©',ayahs:75},
  {n:40,name:'ØºØ§ÙØ±',nameEn:'Ghafir',rev:'Ù…ÙƒÙŠØ©',ayahs:85},
  {n:41,name:'ÙØµÙ„Øª',nameEn:'Fussilat',rev:'Ù…ÙƒÙŠØ©',ayahs:54},
  {n:42,name:'Ø§Ù„Ø´ÙˆØ±Ù‰',nameEn:'Ash-Shura',rev:'Ù…ÙƒÙŠØ©',ayahs:53},
  {n:43,name:'Ø§Ù„Ø²Ø®Ø±Ù',nameEn:'Az-Zukhruf',rev:'Ù…ÙƒÙŠØ©',ayahs:89},
  {n:44,name:'Ø§Ù„Ø¯Ø®Ø§Ù†',nameEn:'Ad-Dukhan',rev:'Ù…ÙƒÙŠØ©',ayahs:59},
  {n:45,name:'Ø§Ù„Ø¬Ø§Ø«ÙŠØ©',nameEn:'Al-Jathiyah',rev:'Ù…ÙƒÙŠØ©',ayahs:37},
  {n:46,name:'Ø§Ù„Ø£Ø­Ù‚Ø§Ù',nameEn:'Al-Ahqaf',rev:'Ù…ÙƒÙŠØ©',ayahs:35},
  {n:47,name:'Ù…Ø­Ù…Ø¯',nameEn:'Muhammad',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:38},
  {n:48,name:'Ø§Ù„ÙØªØ­',nameEn:'Al-Fath',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:29},
  {n:49,name:'Ø§Ù„Ø­Ø¬Ø±Ø§Øª',nameEn:'Al-Hujurat',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:18},
  {n:50,name:'Ù‚',nameEn:'Qaf',rev:'Ù…ÙƒÙŠØ©',ayahs:45},
  {n:51,name:'Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª',nameEn:'Adh-Dhariyat',rev:'Ù…ÙƒÙŠØ©',ayahs:60},
  {n:52,name:'Ø§Ù„Ø·ÙˆØ±',nameEn:'At-Tur',rev:'Ù…ÙƒÙŠØ©',ayahs:49},
  {n:53,name:'Ø§Ù„Ù†Ø¬Ù…',nameEn:'An-Najm',rev:'Ù…ÙƒÙŠØ©',ayahs:62},
  {n:54,name:'Ø§Ù„Ù‚Ù…Ø±',nameEn:'Al-Qamar',rev:'Ù…ÙƒÙŠØ©',ayahs:55},
  {n:55,name:'Ø§Ù„Ø±Ø­Ù…Ù†',nameEn:'Ar-Rahman',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:78},
  {n:56,name:'Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©',nameEn:"Al-Waqi'ah",rev:'Ù…ÙƒÙŠØ©',ayahs:96},
  {n:57,name:'Ø§Ù„Ø­Ø¯ÙŠØ¯',nameEn:'Al-Hadid',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:29},
  {n:58,name:'Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©',nameEn:'Al-Mujadila',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:22},
  {n:59,name:'Ø§Ù„Ø­Ø´Ø±',nameEn:'Al-Hashr',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:24},
  {n:60,name:'Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©',nameEn:'Al-Mumtahanah',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:13},
  {n:61,name:'Ø§Ù„ØµÙ',nameEn:'As-Saf',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:14},
  {n:62,name:'Ø§Ù„Ø¬Ù…Ø¹Ø©',nameEn:"Al-Jumu'ah",rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:11},
  {n:63,name:'Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†',nameEn:'Al-Munafiqun',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:11},
  {n:64,name:'Ø§Ù„ØªØºØ§Ø¨Ù†',nameEn:'At-Taghabun',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:18},
  {n:65,name:'Ø§Ù„Ø·Ù„Ø§Ù‚',nameEn:'At-Talaq',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:12},
  {n:66,name:'Ø§Ù„ØªØ­Ø±ÙŠÙ…',nameEn:'At-Tahrim',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:12},
  {n:67,name:'Ø§Ù„Ù…Ù„Ùƒ',nameEn:'Al-Mulk',rev:'Ù…ÙƒÙŠØ©',ayahs:30},
  {n:68,name:'Ø§Ù„Ù‚Ù„Ù…',nameEn:'Al-Qalam',rev:'Ù…ÙƒÙŠØ©',ayahs:52},
  {n:69,name:'Ø§Ù„Ø­Ø§Ù‚Ø©',nameEn:"Al-Haqqah",rev:'Ù…ÙƒÙŠØ©',ayahs:52},
  {n:70,name:'Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬',nameEn:"Al-Ma'arij",rev:'Ù…ÙƒÙŠØ©',ayahs:44},
  {n:71,name:'Ù†ÙˆØ­',nameEn:'Nuh',rev:'Ù…ÙƒÙŠØ©',ayahs:28},
  {n:72,name:'Ø§Ù„Ø¬Ù†',nameEn:'Al-Jinn',rev:'Ù…ÙƒÙŠØ©',ayahs:28},
  {n:73,name:'Ø§Ù„Ù…Ø²Ù…Ù„',nameEn:'Al-Muzzammil',rev:'Ù…ÙƒÙŠØ©',ayahs:20},
  {n:74,name:'Ø§Ù„Ù…Ø¯Ø«Ø±',nameEn:'Al-Muddaththir',rev:'Ù…ÙƒÙŠØ©',ayahs:56},
  {n:75,name:'Ø§Ù„Ù‚ÙŠØ§Ù…Ø©',nameEn:'Al-Qiyamah',rev:'Ù…ÙƒÙŠØ©',ayahs:40},
  {n:76,name:'Ø§Ù„Ø¥Ù†Ø³Ø§Ù†',nameEn:'Al-Insan',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:31},
  {n:77,name:'Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª',nameEn:'Al-Mursalat',rev:'Ù…ÙƒÙŠØ©',ayahs:50},
  {n:78,name:'Ø§Ù„Ù†Ø¨Ø£',nameEn:"An-Naba",rev:'Ù…ÙƒÙŠØ©',ayahs:40},
  {n:79,name:'Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª',nameEn:"An-Nazi'at",rev:'Ù…ÙƒÙŠØ©',ayahs:46},
  {n:80,name:'Ø¹Ø¨Ø³',nameEn:"'Abasa",rev:'Ù…ÙƒÙŠØ©',ayahs:42},
  {n:81,name:'Ø§Ù„ØªÙƒÙˆÙŠØ±',nameEn:'At-Takwir',rev:'Ù…ÙƒÙŠØ©',ayahs:29},
  {n:82,name:'Ø§Ù„Ø¥Ù†ÙØ·Ø§Ø±',nameEn:'Al-Infitar',rev:'Ù…ÙƒÙŠØ©',ayahs:19},
  {n:83,name:'Ø§Ù„Ù…Ø·ÙÙÙŠÙ†',nameEn:'Al-Mutaffifin',rev:'Ù…ÙƒÙŠØ©',ayahs:36},
  {n:84,name:'Ø§Ù„Ø¥Ù†Ø´Ù‚Ø§Ù‚',nameEn:'Al-Inshiqaq',rev:'Ù…ÙƒÙŠØ©',ayahs:25},
  {n:85,name:'Ø§Ù„Ø¨Ø±ÙˆØ¬',nameEn:'Al-Buruj',rev:'Ù…ÙƒÙŠØ©',ayahs:22},
  {n:86,name:'Ø§Ù„Ø·Ø§Ø±Ù‚',nameEn:'At-Tariq',rev:'Ù…ÙƒÙŠØ©',ayahs:17},
  {n:87,name:'Ø§Ù„Ø£Ø¹Ù„Ù‰',nameEn:"Al-A'la",rev:'Ù…ÙƒÙŠØ©',ayahs:19},
  {n:88,name:'Ø§Ù„ØºØ§Ø´ÙŠØ©',nameEn:'Al-Ghashiyah',rev:'Ù…ÙƒÙŠØ©',ayahs:26},
  {n:89,name:'Ø§Ù„ÙØ¬Ø±',nameEn:'Al-Fajr',rev:'Ù…ÙƒÙŠØ©',ayahs:30},
  {n:90,name:'Ø§Ù„Ø¨Ù„Ø¯',nameEn:'Al-Balad',rev:'Ù…ÙƒÙŠØ©',ayahs:20},
  {n:91,name:'Ø§Ù„Ø´Ù…Ø³',nameEn:'Ash-Shams',rev:'Ù…ÙƒÙŠØ©',ayahs:15},
  {n:92,name:'Ø§Ù„Ù„ÙŠÙ„',nameEn:'Al-Layl',rev:'Ù…ÙƒÙŠØ©',ayahs:21},
  {n:93,name:'Ø§Ù„Ø¶Ø­Ù‰',nameEn:'Ad-Duhaa',rev:'Ù…ÙƒÙŠØ©',ayahs:11},
  {n:94,name:'Ø§Ù„Ø´Ø±Ø­',nameEn:'Ash-Sharh',rev:'Ù…ÙƒÙŠØ©',ayahs:8},
  {n:95,name:'Ø§Ù„ØªÙŠÙ†',nameEn:'At-Tin',rev:'Ù…ÙƒÙŠØ©',ayahs:8},
  {n:96,name:'Ø§Ù„Ø¹Ù„Ù‚',nameEn:"Al-'Alaq",rev:'Ù…ÙƒÙŠØ©',ayahs:19},
  {n:97,name:'Ø§Ù„Ù‚Ø¯Ø±',nameEn:'Al-Qadr',rev:'Ù…ÙƒÙŠØ©',ayahs:5},
  {n:98,name:'Ø§Ù„Ø¨ÙŠÙ†Ø©',nameEn:'Al-Bayyinah',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:8},
  {n:99,name:'Ø§Ù„Ø²Ù„Ø²Ù„Ø©',nameEn:'Az-Zalzalah',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:8},
  {n:100,name:'Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª',nameEn:"Al-'Adiyat",rev:'Ù…ÙƒÙŠØ©',ayahs:11},
  {n:101,name:'Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©',nameEn:"Al-Qari'ah",rev:'Ù…ÙƒÙŠØ©',ayahs:11},
  {n:102,name:'Ø§Ù„ØªÙƒØ§Ø«Ø±',nameEn:'At-Takathur',rev:'Ù…ÙƒÙŠØ©',ayahs:8},
  {n:103,name:'Ø§Ù„Ø¹ØµØ±',nameEn:"Al-'Asr",rev:'Ù…ÙƒÙŠØ©',ayahs:3},
  {n:104,name:'Ø§Ù„Ù‡Ù…Ø²Ø©',nameEn:'Al-Humazah',rev:'Ù…ÙƒÙŠØ©',ayahs:9},
  {n:105,name:'Ø§Ù„ÙÙŠÙ„',nameEn:'Al-Fil',rev:'Ù…ÙƒÙŠØ©',ayahs:5},
  {n:106,name:'Ù‚Ø±ÙŠØ´',nameEn:'Quraysh',rev:'Ù…ÙƒÙŠØ©',ayahs:4},
  {n:107,name:'Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†',nameEn:"Al-Ma'un",rev:'Ù…ÙƒÙŠØ©',ayahs:7},
  {n:108,name:'Ø§Ù„ÙƒÙˆØ«Ø±',nameEn:'Al-Kawthar',rev:'Ù…ÙƒÙŠØ©',ayahs:3},
  {n:109,name:'Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†',nameEn:'Al-Kafirun',rev:'Ù…ÙƒÙŠØ©',ayahs:6},
  {n:110,name:'Ø§Ù„Ù†ØµØ±',nameEn:'An-Nasr',rev:'Ù…Ø¯Ù†ÙŠØ©',ayahs:3},
  {n:111,name:'Ø§Ù„Ù…Ø³Ø¯',nameEn:'Al-Masad',rev:'Ù…ÙƒÙŠØ©',ayahs:5},
  {n:112,name:'Ø§Ù„Ø¥Ø®Ù„Ø§Øµ',nameEn:'Al-Ikhlas',rev:'Ù…ÙƒÙŠØ©',ayahs:4},
  {n:113,name:'Ø§Ù„ÙÙ„Ù‚',nameEn:'Al-Falaq',rev:'Ù…ÙƒÙŠØ©',ayahs:5},
  {n:114,name:'Ø§Ù„Ù†Ø§Ø³',nameEn:'An-Nas',rev:'Ù…ÙƒÙŠØ©',ayahs:6}
];

let currentNum=null, fontSize=2.0, savedSurahs=[], currentTab='quran';
let allSurahs=[...surahMeta];

function toAr(n){return String(n).replace(/\d/g,d=>'Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©'[d]);}

/* â”€â”€ BUILD SIDEBAR â”€â”€ */
function buildSidebar(list){
  const el=document.getElementById('surahList');
  el.innerHTML=list.map(s=>`
    <div class="surah-item ${currentNum==s.n?'active':''}" onclick="selectSurahByNum(${s.n})" id="si-${s.n}">
      <div class="si-num">${toAr(s.n)}</div>
      <div class="si-info">
        <span class="si-name">${s.name}</span>
        <span class="si-meta">${s.nameEn} Â· ${toAr(s.ayahs)} Ø¢ÙŠØ©</span>
      </div>
      <span class="si-revelation">${s.rev}</span>
    </div>`).join('');
  // mobile select
  const mob=document.getElementById('mobileSurahSel');
  if(mob.options.length<=1){
    list.forEach(s=>{const o=document.createElement('option');o.value=s.n;o.textContent=`${toAr(s.n)}. ${s.name}`;mob.appendChild(o);});
  }
}

function filterSurahs(){
  const q=document.getElementById('searchInput').value.trim();
  const filtered=q?surahMeta.filter(s=>s.name.includes(q)||s.nameEn.toLowerCase().includes(q.toLowerCase())||String(s.n).includes(q)):surahMeta;
  buildSidebar(filtered);
}

/* â”€â”€ SELECT SURAH â”€â”€ */
async function selectSurahByNum(n){
  if(!n)return;
  n=parseInt(n);
  closeSidebar();
  document.getElementById('mobileSurahSel').value=n;
  currentNum=n;

  // Update active
  document.querySelectorAll('.surah-item').forEach(el=>el.classList.remove('active'));
  const si=document.getElementById('si-'+n);
  if(si){si.classList.add('active');si.scrollIntoView({block:'nearest'});}

  // Check saved
  const saved=savedSurahs.find(s=>s.n==n);
  if(saved){displaySurah(saved.data,saved.tafseer);return;}

  if(!navigator.onLine){showToast('ğŸ“´ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ ÙˆÙ‡Ø°Ù‡ Ø§Ù„Ø³ÙˆØ±Ø© ØºÙŠØ± Ù…Ø­ÙÙˆØ¸Ø©');return;}

  showLoader();
  try{
    const [quranRes,tafseerRes]=await Promise.all([
      fetch(`https://api.alquran.cloud/v1/surah/${n}/quran-uthmani`),
      fetch(`https://api.alquran.cloud/v1/surah/${n}/ar.muyassar`)
    ]);
    const qData=(await quranRes.json()).data;
    const tData=(await tafseerRes.json()).data;
    displaySurah(qData,tData);
  }catch(e){
    hideLoader();
    showToast('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© â€” ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„');
  }
}

/* â”€â”€ DISPLAY â”€â”€ */
function displaySurah(qData,tData){
  const meta=surahMeta.find(s=>s.n==currentNum)||{};

  // Header
  document.getElementById('shNum').textContent=toAr(currentNum);
  document.getElementById('shName').textContent=`Ø³ÙˆØ±Ø© ${qData.name}`;
  document.getElementById('shNameEn').textContent=meta.nameEn||'';
  document.getElementById('shRevelation').textContent=meta.rev||'';
  document.getElementById('shAyahs').textContent=toAr(qData.numberOfAyahs||qData.ayahs?.length||0);
  document.getElementById('topbarTitle').textContent=`Ø³ÙˆØ±Ø© ${qData.name}`;

  // Hide bismillah for At-Tawbah (9) and Al-Fatihah already has it
  document.getElementById('bismillah').style.display=currentNum==9?'none':'block';

  // Quran text
  document.getElementById('quranText').innerHTML=
    qData.ayahs.map(a=>`<span class="ayah-span">${a.text}<span class="ayah-num">${toAr(a.numberInSurah)}</span></span> `).join('');

  // Tafseer
  if(tData&&tData.ayahs){
    document.getElementById('tafseerText').innerHTML=
      tData.ayahs.map((a,i)=>`
        <div class="tafseer-ayah">
          <div class="ta-arabic">
            <span class="ta-num">${toAr(a.numberInSurah)}</span>
            ${qData.ayahs[i]?.text||''}
          </div>
          <div class="ta-tafseer">${a.text}</div>
        </div>`).join('');
  }

  // Audio
  updateAudio();
  updateSaveBtn();
  switchTab(currentTab,null,true);

  hideLoader();
  document.getElementById('emptyState').style.display='none';
  document.getElementById('surahCard').classList.add('show');

  // Scroll
  document.getElementById('surahCard').scrollIntoView({behavior:'smooth',block:'start'});
}

/* â”€â”€ AUDIO â”€â”€ */
function updateAudio(){
  if(!currentNum)return;
  const rec=document.getElementById('reciterSel').value;
  const url=`https://cdn.islamic.network/quran/audio-surah/128/${rec}/${currentNum}.mp3`;
  document.getElementById('player').src=url;
  document.getElementById('dlBtn').href=url;
}

/* â”€â”€ TABS â”€â”€ */
function switchTab(tab,btn,silent){
  currentTab=tab;
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  if(btn)btn.classList.add('active');
  else document.querySelectorAll('.tab-btn')[tab==='quran'?0:1]?.classList.add('active');
  document.getElementById('quranText').style.display=tab==='quran'?'block':'none';
  const tf=document.getElementById('tafseerText');
  tf.classList.toggle('show',tab==='tafseer');
  if(tab==='tafseer'&&!silent)tf.scrollIntoView({behavior:'smooth',block:'start'});
}

/* â”€â”€ FONT â”€â”€ */
function changeFont(d){
  fontSize=Math.max(1.4,Math.min(3.5,fontSize+d*0.15));
  document.getElementById('quranText').style.fontSize=fontSize+'rem';
}

/* â”€â”€ SAVE â”€â”€ */
function toggleSave(){
  if(!currentNum)return;
  const idx=savedSurahs.findIndex(s=>s.n==currentNum);
  if(idx>-1){
    savedSurahs.splice(idx,1);
    showToast('ğŸ—‘ï¸ ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø§Øª');
  }else{
    // store current rendered text
    const qEl=document.getElementById('quranText').innerHTML;
    const tEl=document.getElementById('tafseerText').innerHTML;
    savedSurahs.push({n:currentNum,name:surahMeta.find(s=>s.n==currentNum)?.name||'',qHTML:qEl,tHTML:tEl});
    showToast('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø³ÙˆØ±Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¨Ø¯ÙˆÙ† Ù†Øª');
  }
  localStorage.setItem('savedSurahs',JSON.stringify(savedSurahs));
  updateSaveBtn();
  renderSavedPills();
}

function updateSaveBtn(){
  const saved=savedSurahs.some(s=>s.n==currentNum);
  const btn=document.getElementById('saveBtn');
  btn.textContent=saved?'âœ“ Ù…Ø­ÙÙˆØ¸Ø©':'ğŸ’¾ Ø­ÙØ¸ Ø¨Ø¯ÙˆÙ† Ù†Øª';
  btn.classList.toggle('saved',saved);
}

function renderSavedPills(){
  const wrap=document.getElementById('savedWrap');
  const pills=document.getElementById('savedPills');
  if(savedSurahs.length===0){wrap.classList.remove('show');return;}
  wrap.classList.add('show');
  pills.innerHTML=savedSurahs.map(s=>`<div class="saved-pill" onclick="selectSurahByNum(${s.n})">${s.name}</div>`).join('');
}

/* â”€â”€ SIDEBAR â”€â”€ */
function toggleSidebar(){
  document.getElementById('sidebar').classList.toggle('open');
  document.getElementById('overlay').classList.toggle('show');
}
function closeSidebar(){
  document.getElementById('sidebar').classList.remove('open');
  document.getElementById('overlay').classList.remove('show');
}

/* â”€â”€ THEME â”€â”€ */
function toggleTheme(){
  document.body.classList.toggle('light');
  const l=document.body.classList.contains('light');
  localStorage.setItem('qTheme',l?'light':'dark');
}

/* â”€â”€ LOADER â”€â”€ */
function showLoader(){
  document.getElementById('surahCard').classList.remove('show');
  document.getElementById('emptyState').style.display='none';
  document.getElementById('loader').classList.add('show');
}
function hideLoader(){document.getElementById('loader').classList.remove('show');}

/* â”€â”€ TOAST â”€â”€ */
function showToast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),3000);
}

/* â”€â”€ ONLINE STATUS â”€â”€ */
function checkOnline(){
  document.getElementById('offlineBar').classList.toggle('show',!navigator.onLine);
}
window.addEventListener('online',checkOnline);
window.addEventListener('offline',checkOnline);

/* â”€â”€ TOPBAR SCROLL â”€â”€ */
window.addEventListener('scroll',()=>{
  document.getElementById('topbar').classList.toggle('scrolled',scrollY>20);
},{passive:true});

/* â”€â”€ KEYBOARD â”€â”€ */
document.addEventListener('keydown',e=>{
  if(e.code==='Space'&&e.target===document.body){
    e.preventDefault();
    const p=document.getElementById('player');
    p.paused?p.play():p.pause();
  }
});

/* â”€â”€ INIT â”€â”€ */
window.addEventListener('DOMContentLoaded',()=>{
  buildSidebar(surahMeta);
  checkOnline();

  if(localStorage.getItem('qTheme')==='light')document.body.classList.add('light');

  savedSurahs=JSON.parse(localStorage.getItem('savedSurahs')||'[]');
  renderSavedPills();

  // Last read
  const last=localStorage.getItem('qLastRead');
  if(last)selectSurahByNum(parseInt(last));
});

/* SW */
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('/sw.js',{scope:'/'})
    .then(r=>console.log('[SW]',r.scope)).catch(()=>{});
}
</script>
</body>
</html>